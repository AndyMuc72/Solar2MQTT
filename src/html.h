#pragma once

#include <Arduino.h>  // PROGMEM

static const char HTML_CONFIRM_RESET[] PROGMEM = R"rawliteral(%pre_head_template% <figure class=text-center><h1>Erase all Data?</h1></figure><div class="d-grid gap-2"><a class="btn btn-danger" href=/reset role=button>Yes</a><a class="btn btn-primary" href=/settings role=button>No</a></div> %pre_foot_template% <p hidden>)rawliteral";
static const char HTML_FOOT[] PROGMEM = R"rawliteral(<figure class=text-center>Solar2MQTT <a id=software_version>%pre_software_version%</a> By <a href=https://github.com/softwarecrash/Solar2MQTT target=_blank>Softwarecrash</a><a href=http://creativecommons.org/licenses/by-nc-nd/4.0/ rel=license target=_blank><img alt="Creative Commons License" src=https://licensebuttons.net/l/by-nc-nd/4.0/80x15.png style=border-width:0></a></figure><div style="display: none;" id=update_alert><figure class=text-center><a id=fwdownload target=_blank>Download the latest version <b id=gitversion></b></a></figure></div><script>$(document).ready(function(){$.getJSON(`https://api.github.com/repos/softwarecrash/Solar2MQTT/releases/latest`,function(){}).done(function(data){console.log(`get data from github done success`),$(`#fwdownload`).attr(`href`,data.html_url),$(`#gitversion`).text(data.tag_name.substring(1));let x=data.tag_name.substring(1).split(`.`).map(e=>parseInt(e)),y=`%pre_swversion%`.split(`.`).map(e=>parseInt(e)),z=``;for(i=0;i<x.length;i++)x[i]===y[i]?z+=`e`:x[i]>y[i]?z+=`m`:z+=`l`;z.match(/[l|m]/g)?z.split(`e`).join(``)[0]==`m`?(console.log(`Git-Version higher, activate notification.`),document.getElementById(`update_alert`).style.display=``):console.log(`Git-Version lower, nothing to do.`):console.log(`Git-Version equal, nothing to do.`)}).fail(function(){console.log(`error can not get version`)})});</script>)rawliteral";
static const char HTML_HEAD[] PROGMEM = R"rawliteral(<!doctype html><html data-bs-theme=%pre_darkmode% lang=en xml:lang=en><meta content="text/html;charset=UTF-8" http-equiv=content-type><meta content="width=device-width,initial-scale=1" name=viewport><link href="data:image/x-icon;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAHsSURBVDhPrZLLSxtRFMZHY9A2Wou0FB+oiZUWTaPEVo15qInBjamSqLFVk0rV0ke0saAmgg90o5v42NQHCmYkXehC/wbFuK//gG6yyiIki0Dg69zDEEgp46L+4HKHc8/3zTnnXg7/yf0b7O7tIZVK0XcikaBdCjKIx+MI8jzGxj+hWadHu9mC94NDlHAXZBAIrENTVw+O49LrlaYOfv8cJUnBnV9cYNjlJlGOPBfZMnnaZGrqBw6DQTH131AFLtcHEjDxQ0UBunvsMBhMWFhcoiQpyODj6Fj6rz6fH03NOmpL2/BGmEkLnZdXVGJ+YRFPnj5DKPSLxAzu5uYWkUgEXba3KHxchP39AyhVVVheXoFarYHZ0oHPX76iplYNj2cCptY29DsHRLlYQTKZxOnpGaLRKFRV1dAbjLAJhsUlZdBqX8PpfIeS0jKhCiW+e73gsmQkZpABIxaL4ff1NbXxzeNBVnYOFPmPUP3iJazWTuQ9UNCQJyYnKef4+IR0aQMGzx/Bbu/Fz+0dDA4Nw+0ewfTMLFZX1+imWIw9NEdvPzY2t0iTYeAT7r1Fb4TBaBIeUwfNRal6TiU7HH0UY2dt7WY0NulIk2HwN2y4FosV8tw8XIbDYjQTSYPw1RUC6xvU0mGQF6OZSBrcDfAHIwsaPAvZdQgAAAAASUVORK5CYII=" rel="shortcut icon"><link crossorigin href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css integrity=sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9 rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css rel=stylesheet><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js></script><script crossorigin integrity=sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js></script><script src=" https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js "></script><title>%pre_device_name%</title><body><noscript><strong>We're sorry but it doesn't work properly without JavaScript enabled. Please enable it to continue.</strong></noscript><div class="container-sm col-sm-10 col-md-6 col-lg-4">)rawliteral";
static const char HTML_MAIN[] PROGMEM = R"rawliteral(%pre_head_template% <figure class=text-center><h2 id=device_name>%pre_device_name%</h2></figure><div class="dR row gx-0 mb-2"><div class=col id=ClickSOC><div class=progress style=height:1.8rem;><div class="progress-bar dF" aria-valuemax=100 aria-valuemin=0 aria-valuenow=0 id=packSOC role=progressbar style=width:0%;height:1.8rem;></div></div></div></div><div class="dR row gx-0 mb-2 bg-light rounded bg-opacity-50 px-2"><div class=col>Solar:</div><div class="col dF"><span id=pv_volt></span><span id=pv_current></span><span id=pv_power></span></div></div><div class="dR row gx-0 mb-2 bg-light rounded bg-opacity-50 px-2"><div class=col>Solar2:</div><div class="col dF"><span id=pv2_volt></span><span id=pv2_current></span><span id=pv2_power></span></div></div><div class="dR row gx-0 mb-2 bg-light rounded bg-opacity-50 px-2"><div class=col>Grid:</div><div class="col dF"><span id=grid_volt></span><span id=grid_hz></span></div></div><div class="dR row gx-0 mb-2 bg-light rounded bg-opacity-50 px-2"><div class=col>AC out:</div><div class="col dF"><span id=ac_out_volt></span><span id=ac_out_hz></span><span id=ac_out_power></span><span id=ac_out_percent></span></div></div><div class="dR row gx-0 mb-2 bg-light rounded bg-opacity-50 px-2"><div class=col>Temperature:</div><div class="col dF"><span id=heatsink_temp></span></div></div><div class="dR row gx-0 mb-2 bg-light rounded bg-opacity-50 px-2"><div class=col>Battery:</div><div class="col dF"><span id=batt_volt></span><span id=batt_load></span><span id=batt_percent></span></div></div><div class="dR row gx-0 mb-2 bg-light rounded bg-opacity-50 px-2"><div class=col>Inverter mode:</div><div class="col dF"><span id=ivmode></span></div></div><div class="d-grid gap-2"><a class="btn btn-primary btn-block" href=/settings role=button>Settings</a></div><script>$(document).ready(function(){initWebSocket()
//setInterval(refreshAlert, 5000);
});var gateway=`ws://${window.location.host}/ws`,websocket,ctx,cellChart,createBarChart=!0,alertListArr=[],alertListitem=0,kickRefresh=!0,dataFields=document.getElementsByClassName(`dF`),dataRows=document.getElementsByClassName(`dR`);function initWebSocket(){websocket=new WebSocket(gateway),websocket.onopen=onOpen,websocket.onclose=onClose,websocket.onerror=onError,websocket.onmessage=onMessage}function onOpen(event){console.log(`Connection opened`),setInterval(checkWS,5e3)}function onClose(event){console.log(`Connection closed`),setTimeout(initWebSocket,3e3)}function onError(event){
//document.getElementById("status").innerHTML = 'WS Lost';
console.log(`Connection lost`)}function onMessage(event){var data=JSON.parse(event.data);document.getElementById(`packSOC`).innerHTML=data.Battery_Percent+`%%`,$(`#packSOC`).width(data.Battery_Percent+`%%`).attr(`aria-valuenow`,data.Battery_Percent),document.getElementById(`pv_volt`).innerHTML=data.PV_Input_Voltage+`V `,document.getElementById(`pv_current`).innerHTML=data.PV_Input_Current+`A  `,document.getElementById(`pv_power`).innerHTML=Math.round(data.PV_Charging_Power)+`W  `,document.getElementById(`pv2_volt`).innerHTML=data.PV2_Input_Voltage+`V `,document.getElementById(`pv2_current`).innerHTML=data.PV2_Input_Current+`A  `,document.getElementById(`pv2_power`).innerHTML=Math.round(data.PV2_Charging_Power)+`W  `,document.getElementById(`grid_volt`).innerHTML=data.AC_in_Voltage+`V `,document.getElementById(`grid_hz`).innerHTML=data.AC_in_Frequenz+`Hz  `,document.getElementById(`ac_out_volt`).innerHTML=data.AC_out_Voltage+`V `,document.getElementById(`ac_out_hz`).innerHTML=data.AC_out_Frequenz+`Hz `,document.getElementById(`ac_out_power`).innerHTML=data.AC_out_Watt+`W `,document.getElementById(`ac_out_percent`).innerHTML=data.AC_out_percent+`%%`,document.getElementById(`heatsink_temp`).innerHTML=data.Inverter_Bus_Temperature+`Â°C `,document.getElementById(`batt_volt`).innerHTML=data.Battery_Voltage+`V `,document.getElementById(`batt_percent`).innerHTML=data.Battery_Percent+`%% `,document.getElementById(`batt_load`).innerHTML=data.Battery_Load+`A `,document.getElementById(`ivmode`).innerHTML=data.Inverter_Operation_Mode;for(var i=0;i<dataFields.length;i++)dataFields[i].innerHTML.indexOf(`undefined`)>-1?dataFields[i].style.display=`none`:dataFields[i].style.display=``;for(var i=0;i<dataRows.length;i++)dataRows[i].innerHTML.indexOf(`undefined`)>-1?dataRows[i].style.display=`none`:dataRows[i].style.display=``}
/*
function alert(data) {
alertListArr = [];
if (data.Device.ESP_VCC < 2.8) {
alertListArr.push("ESP Volt to Low");
}
// if (!data.Pack.Fail_Codes.length == 0) {
//     var i;
//    var i_list = data.Pack.Fail_Codes.split(',');
//   for (var i_index in i_list) {
//        i = i_list[i_index];
//      alertListArr.push(i_list[i_index]);
//  }
// }
if (alertListArr.length == 0) {
document.getElementById("alert").style.display = 'none';
} else {
document.getElementById("alert").style.display = '';
}
if (kickRefresh) {
refreshAlert();
kickRefresh = false;
}
}

function refreshAlert() {
var alertValue;
if (alertListitem < alertListArr.length - 1) {
alertValue = (alertListArr[alertListitem]);
alertListitem++;
} else {
alertValue = (alertListArr[alertListitem]);
alertListitem = 0;
}
if (typeof alertValue !== 'undefined') {
if (alertValue[alertValue.length - 1] == "1") {

document.getElementById("alert_icon").className = "bi bi-info-circle-fill";
document.getElementById("alert").className = "row gx-0 mb-2 alert alert-info";
} else if (alertValue[alertValue.length - 1] == "2") {
document.getElementById("alert_icon").className = "bi bi-exclamation-circle-fill";
document.getElementById("alert").className = "row gx-0 mb-2 alert alert-warning";
} else {
document.getElementById("alert_icon").className = "bi bi-x-circle-fill";
document.getElementById("alert").className = "row gx-0 mb-2 alert alert-danger";
}
}
document.getElementById('alert_message').innerHTML = (alertValue);
}
*/
function initButton(){}function checkWS(){websocket.readyState!==WebSocket.CLOSED&&websocket.send(`A9`)}</script> %pre_foot_template% <p hidden>)rawliteral";
static const char HTML_REBOOT[] PROGMEM = R"rawliteral(%pre_head_template% <figure class=text-center><h1>Rebooting</h1><h2 id=wait>.</h2></figure><div class="d-grid gap-2"><a class="btn btn-primary" href=/ role=button>Main</a></div><script>$(document).ready(function(){window.dotsGoingUp=!0;var dots=window.setInterval(function(){var wait=document.getElementById(`wait`);window.dotsGoingUp?wait.innerHTML+=`.`:(wait.innerHTML=wait.innerHTML.substring(1,wait.innerHTML.length),wait.innerHTML===`.`&&(window.dotsGoingUp=!0)),wait.innerHTML.length>9&&(window.dotsGoingUp=!1)},100);setTimeout(startCheck,2e3);function startCheck(){setInterval(serverReachable,1e3)}function serverReachable(){$.get(`/`).done(function(){window.location=`/`,console.log(`success`)}).fail(function(){console.log(`failed.`)})}});</script> %pre_foot_template% <p hidden>)rawliteral";
static const char HTML_SETTINGS[] PROGMEM = R"rawliteral(%pre_head_template% <figure class=text-center><h1>Settings</h1></figure><div class="d-grid gap-2"><form id=uploadform><div class=input-group><input accept=.bin.gz aria-describedby=uploadformfield aria-label=Upload class=form-control id=uploadformfield name=update type=file><input class="btn btn-outline-secondary" value="Firmware Update" id=uploadbutton onclick=postFile() type=button></div></form><div class="row gx-0 mb-2" id=uploadbar style=display:none;><div class=col><div class=progress style=height:1.8rem;><div class="progress progress-bar" aria-valuemax=100 aria-valuemin=0 aria-valuenow=0 id=progress-bar-file1 role=progressbar style=width:0%%;height:1.8rem;></div></div></div></div><a class="btn btn-primary" href=/settingsedit role=button>Configure</a><a class="btn btn-warning" href=/reboot role=button>Reboot</a><a class="btn btn-primary" href=/confirmreset role=button>Reset ESP</a><a class="btn btn-primary" href=/webserial role=button target=_blank>WebSerial</a><a class="btn btn-primary" href=/ role=button>Back</a></div><script>var Flash_Size=NaN;$(`#uploadformfield`).bind(`change`,function(){console.log(this.files[0].size),console.log(Flash_Size),this.files[0].size>Flash_Size?(document.getElementById(`uploadbutton`).style.color=`red`,document.getElementById(`uploadbutton`).value=`No Space`,document.getElementById(`uploadbutton`).disabled=!0):(document.getElementById(`uploadbutton`).style.color=``,document.getElementById(`uploadbutton`).value=`Update`,document.getElementById(`uploadbutton`).disabled=!1)});function postFile(){var formdata=new FormData;formdata.append(`uploadformfield`,$(`#uploadformfield`)[0].files[0]);var request=new XMLHttpRequest;request.onreadystatechange=function(){request.readyState==XMLHttpRequest.DONE&&(console.log(request.responseText),$(`#progress-bar-file1`).html(request.responseText),request.responseText==`OK`?window.location.href=`/reboot`:document.getElementById(`progress-bar-file1`).style.color=`red`)},request.upload.addEventListener(`progress`,function(e){var file1Size=$(`#uploadformfield`)[0].files[0].size;if(document.getElementById(`uploadbar`).style.display=``,e.loaded<=file1Size){var percent=Math.round(e.loaded/file1Size*100);$(`#progress-bar-file1`).width(percent+`%%`).html(percent+`%%`)}e.loaded==e.total&&$(`#progress-bar-file1`).width(`100%%`).html(`100%%`)}),request.open(`post`,`/update`),request.timeout=45e3,request.send(formdata)}</script> %pre_foot_template% <p hidden>)rawliteral";
static const char HTML_SETTINGS_EDIT[] PROGMEM = R"rawliteral(%pre_head_template% <figure class=text-center><h1>Edit Configuration</h1></figure><form action=/settingssave enctype=multipart/form-data method=POST><div class="input-group mb-2"><span class="input-group-text w-50" id=devicenamedesc>Device Name</span><input onkeyup="this.value=this.value.replace(/\s+/g,'_');" aria-describedby=devicenamedesc class=form-control id=devicename maxlength=35 name=post_deviceName value=%pre_device_name%></div><div class="input-group mb-2"><span class="input-group-text w-50" id=mqttserverdesc>MQTT Server</span><input aria-describedby=mqttserverdesc class=form-control id=mqttserver maxlength=35 name=post_mqttServer value=%pre_mqtt_server%></div><div class="input-group mb-2"><span class="input-group-text w-50" id=mqttportdesc>MQTT Port</span><input aria-describedby=mqttportdesc class=form-control id=mqttport maxlength=5 name=post_mqttPort value=%pre_mqtt_port%></div><div class="input-group mb-2"><span class="input-group-text w-50" id=mqttuserdesc>MQTT User</span><input aria-describedby=mqttuserdesc class=form-control id=mqttuser maxlength=35 name=post_mqttUser value=%pre_mqtt_user%></div><div class="input-group mb-2"><span class="input-group-text w-50" id=mqttpassworddesc>MQTT Password</span><input aria-describedby=mqttpassworddesc class=form-control id=mqttpassword maxlength=35 name=post_mqttPassword type=password value=%pre_mqtt_pass%></div><div class="input-group mb-2"><span class="input-group-text w-50" id=mqtttopicdesc>MQTT Topic</span><input onkeyup="this.value=this.value.replace(/\s+/g,'_');" aria-describedby=mqtttopicdesc class=form-control id=mqtttopic maxlength=35 name=post_mqttTopic value=%pre_mqtt_topic%></div><div class="input-group mb-2"><span class="input-group-text w-50" id=mqttrefreshdesc>MQTT Refresh (sec)</span><input aria-describedby=mqttrefreshdesc class=form-control id=mqttrefresh maxlength=5 name=post_mqttRefresh value=%pre_mqtt_refresh%></div><div class="input-group mb-2"><span class="input-group-text w-50" id=mqtttriggerdesc>MQTT Data Trigger Path</span><input onkeyup="this.value=this.value.replace(/\s+/g,'_');" aria-describedby=mqtttrigerdesc class=form-control id=mqtttrigger maxlength=80 name=post_mqtttrigger value=%pre_mqtt_mqtttrigger%></div><div class="input-group mb-2"><span class="input-group-text w-50" id=mqttjsondesc>MQTT Json Style</span><div class="form-switch form-control mqtt-settings-switch" style="width:50%%; text-align: center;"><input class="form-check-input form control" %pre_mqtt_json% aria-describedby=mqttjsondesc id=mqttjson name=post_mqttjson role=switch type=checkbox value=true></div></div><div class="input-group mb-2"><span class="input-group-text w-50" id=mqtthadisc>HA Discovery</span><div class="form-switch form-control mqtt-settings-switch" style="width:50%%; text-align: center;"><input class="form-check-input form control" %pre_hadiscovery% aria-describedby=mqtthadisc id=post_hadiscovery name=post_hadiscovery onclick=haSwitch() role=switch type=checkbox value=true></div></div><div class="input-group mb-2"><span class="input-group-text w-50" id=webuicolormode>WebUI Dark Mode</span><div class="form-switch form-control" style="width:50%%; text-align: center;"><input class="form-check-input form control" %pre_webuidarkmode% aria-describedby=webuicolormode id=mqttjson name=post_webuicolormode role=switch type=checkbox value=true></div></div><div class="input-group mb-2"><span class="input-group-text w-50" id=httpUserdesc>HTTP Username</span><input aria-describedby=httpUserdesc class=form-control id=httpUser maxlength=35 name=post_httpUser value=%pre_http_user%></div><div class="input-group mb-2"><span class="input-group-text w-50" id=httpPassdesc>HTTP Password</span><input aria-describedby=httpPassdesc class=form-control id=httpPass maxlength=35 name=post_httpPass type=password value=%pre_http_pass%></div><div class="d-grid gap-2"><input class="btn btn-primary" value="Save settings" type=submit><a class="btn btn-primary" href=/settings role=button>Back</a></div></form><script>$(document).ready(function(load){haSwitch()});function haSwitch(){document.getElementById(`post_hadiscovery`).checked&&(document.getElementById(`mqttjson`).checked=!1,document.getElementById(`mqttjson`).disabled=!0),document.getElementById(`mqttjson`).disabled=document.getElementById(`post_hadiscovery`).checked}</script> %pre_foot_template% <p hidden>)rawliteral";
